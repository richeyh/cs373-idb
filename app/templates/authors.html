{% extends "base.html" 

{% block content %}
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<script src="{{ url_for('static', filename='js/dirPagination.js') }}"></script>

<aside class="fh5co-page-heading">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h1 class="fh5co-page-heading-lead">
					Authors
				</h1>
			</div>
		</div>
	</div>
</aside>



<div align="center" class="container controller" ng-app="myApp" ng-controller="authorsCtrl">
	<form>
		<div class="form-group">
			<div class="input-group">
				<!-- <div class="input-group-addon"><i class="fa fa-search"></i></div> -->
				<input type="text" class="form-control" placeholder="Search author" ng-model="searchAuthor">
			</div>
		</div>
	</form>
	<table class="col-lg-8 table table-hover" align="center">
		<!-- <col width="100">
		<col width="100">
		<col width="90">
		<col width="200">
		<col width="150"> -->
		<thead>
			<tr>
				<th>
					<a href='#' ng-click="sortType = 'lastName'; sortReverse = !sortReverse">
					Last Name
					<span ng-show="sortType == 'lastName' && !sortReverse" class="fa fa-caret-down"></span>
					<span ng-show="sortType == 'lastName' && sortReverse" class="fa fa-caret-up"></span>
				</th>
				<th>
					<a href='#' ng-click="sortType = 'firstName'; sortReverse = !sortReverse">
						First Name
					<span ng-show="sortType == 'firstName' && !sortReverse" class="fa fa-caret-down"></span>
					<span ng-show="sortType == 'firstName' && sortReverse" class="fa fa-caret-up"></span>
				</th>
				<th>
					<a href='#' ng-click="sortType = 'count'; sortReverse = !sortReverse">
					Book count
					<span ng-show="sortType == 'count' && !sortReverse" class="fa fa-caret-down"></span>
					<span ng-show="sortType == 'count' && sortReverse" class="fa fa-caret-up"></span>
				</th>
				<th>
					<a href='#' ng-click="sortType = 'recent'; sortReverse = !sortReverse">
					Most Recent Book in List
					<span ng-show="sortType == 'recent' && !sortReverse" class="fa fa-caret-down"></span>
					<span ng-show="sortType == 'recent' && sortReverse" class="fa fa-caret-up"></span>
				</th>
				<th>
					<a href='#' ng-click="sortType = 'date'; sortReverse = !sortReverse">
					Best Seller Date
					<span ng-show="sortType == 'date' && !sortReverse" class="fa fa-caret-down"></span>
					<span ng-show="sortType == 'date' && sortReverse" class="fa fa-caret-up"></span>
				</th>
				<th>
					Link
				</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="x in array | orderBy:sortType:sortReverse | filter:searchAuthor">
				{% raw %}
				<td>{{x.last_name}}</td>
				<td>{{x.first_name}}</td>
				<td>{{x.book_count}}</td>
				<td>{{x.recent_book}}</td>
				<td>{{x.best_seller_date}}</td>
				<td><a href="{{x.link}}">Link</a></td>
				{% endraw %}
			</tr>
		</tbody>
	</table>
</div>
{% endblock %}
{% block javascript %}
var app = angular.module('myApp', []);
app.controller('authorsCtrl', function($scope){
	$scope.sortType = 'lastName';
	$scope.sortReverse = false;
	$scope.searchAuthor = '';

	$scope.array = [
		{% for author in authors %}
			{% do author.update({'link':url_for('.Author',author_id=author["id"])}) %}
			{{ author|safe }} ,
		{% endfor %}
	];
});
{% endblock %}
